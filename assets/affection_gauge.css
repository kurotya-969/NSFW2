/* 麻理チャットアプリ - 拡張スタイルシート */
/* 全体的なテーマ設定 */
:root {
    --primary-color: #ff6b8b !important;
    --primary-light: #ffccd5 !important;
    --primary-dark: #d94c6a !important;
    --accent-color: #6b7fff !important;
    --accent-light: #d5dcff !important;
    --accent-dark: #4c5ad9 !important;
    --neutral-light: #f8f9fa !important;
    --neutral-medium: #e9ecef !important;
    --neutral-dark: #495057 !important;
    --text-primary: #212529 !important;
    --text-secondary: #6c757d !important;
    --shadow-soft: 0 2px 10px rgba(0, 0, 0, 0.05) !important;
    --shadow-medium: 0 4px 12px rgba(0, 0, 0, 0.08) !important;
    --border-radius-sm: 8px !important;
    --border-radius-md: 12px !important;
    --border-radius-lg: 20px !important;
    --transition-normal: all 0.3s ease !important;
    --font-main: 'M PLUS Rounded 1c', 'Nunito', sans-serif !important;
}

/* フォント読み込み - Google Fontsから日本語対応のかわいいフォント */
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;400;500;700&family=Nunito:wght@400;600;700&display=swap');

/* 全体のスタイル調整 */
body .gradio-container {
    font-family: var(--font-main) !important;
    background-color: var(--neutral-light) !important;
    color: var(--text-primary) !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 20px !important;
    box-shadow: var(--shadow-medium) !important;
}

/* ヘッダースタイル */
.gradio-markdown h1, 
.gradio-markdown h2, 
.gradio-markdown h3 {
    font-family: var(--font-main) !important;
    color: var(--primary-dark) !important;
    text-align: center !important;
    margin-bottom: 1.5rem !important;
}

.gradio-markdown h2 {
    position: relative !important;
    padding-bottom: 10px !important;
}

.gradio-markdown h2:after {
    content: '' !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 60px !important;
    height: 3px !important;
    background: linear-gradient(to right, var(--primary-color), var(--accent-color)) !important;
    border-radius: 3px !important;
}

/* チャットボックスのスタイル改善 */
.gradio-chatbot {
    border-radius: var(--border-radius-md) !important;
    box-shadow: var(--shadow-soft) !important;
    background-color: white !important;
    overflow: hidden !important;
    border: 1px solid var(--neutral-medium) !important;
}

.gradio-chatbot .user-message {
    background-color: var(--accent-light) !important;
    border-radius: var(--border-radius-sm) !important;
    padding: 12px 16px !important;
    margin: 8px !important;
    position: relative !important;
}

.gradio-chatbot .bot-message {
    background-color: var(--primary-light) !important;
    border-radius: var(--border-radius-sm) !important;
    padding: 12px 16px !important;
    margin: 8px !important;
    position: relative !important;
}

/* 入力フィールドのスタイル改善 */
.gradio-textbox textarea {
    border-radius: var(--border-radius-md) !important;
    border: 2px solid var(--neutral-medium) !important;
    padding: 12px !important;
    font-family: var(--font-main) !important;
    transition: var(--transition-normal) !important;
}

.gradio-textbox textarea:focus {
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 3px var(--primary-light) !important;
    outline: none !important;
}

/* ボタンのスタイル改善 */
.gradio-button {
    border-radius: var(--border-radius-md) !important;
    font-family: var(--font-main) !important;
    font-weight: 600 !important;
    padding: 10px 20px !important;
    transition: var(--transition-normal) !important;
    border: none !important;
    cursor: pointer !important;
}

.gradio-button.primary {
    background-color: var(--primary-color) !important;
    color: white !important;
}

.gradio-button.primary:hover {
    background-color: var(--primary-dark) !important;
    transform: translateY(-2px) !important;
    box-shadow: var(--shadow-medium) !important;
}

.gradio-button.secondary {
    background-color: var(--neutral-medium) !important;
    color: var(--text-primary) !important;
}

.gradio-button.secondary:hover {
    background-color: var(--neutral-dark) !important;
    color: white !important;
    transform: translateY(-2px) !important;
}

/* アコーディオンのスタイル改善 */
.gradio-accordion {
    border-radius: var(--border-radius-md) !important;
    overflow: hidden !important;
    box-shadow: var(--shadow-soft) !important;
    margin-bottom: 20px !important;
    border: 1px solid var(--neutral-medium) !important;
}

.gradio-accordion .accordion-header {
    background-color: white !important;
    padding: 12px 16px !important;
    font-weight: 600 !important;
    color: var(--primary-dark) !important;
    cursor: pointer !important;
    transition: var(--transition-normal) !important;
    display: flex !important;
    align-items: center !important;
}

.gradio-accordion .accordion-header:hover {
    background-color: var(--neutral-light) !important;
}

.gradio-accordion .accordion-content {
    padding: 16px !important;
    background-color: white !important;
}

/* 親密度ゲージのスタイル改善 */
.affection-gauge {
    margin: 20px 0 !important;
    padding: 15px !important;
    background-color: white !important;
    border-radius: var(--border-radius-md) !important;
    box-shadow: var(--shadow-soft) !important;
    position: relative !important;
}

.affection-gauge::before {
    content: '💖' !important;
    position: absolute !important;
    left: -10px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    font-size: 24px !important;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)) !important;
}

.affection-gauge .gradio-slider {
    height: 24px !important;
    border-radius: var(--border-radius-lg) !important;
    overflow: hidden !important;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.1) !important;
}

.affection-gauge .gradio-slider .slider-track {
    height: 100% !important;
    background: linear-gradient(to right,
        #ff4d6d 0%,      /* hostile - 赤 (より鮮やか) */
        #ff7e54 10%,     /* hostile -> distant (より暖かい) */
        #ffbe3d 25%,     /* distant -> cautious (より明るい) */
        #fff95b 45%,     /* cautious -> friendly (より鮮やか) */
        #a5ed6e 65%,     /* friendly -> warm (より明るい) */
        #64d2ff 85%,     /* warm -> close (より鮮やか) */
        #bb8eff 100%     /* close - 紫 (より明るい) */
    ) !important;
}

.affection-gauge .gradio-slider .slider-handle {
    width: 30px !important;
    height: 30px !important;
    top: -3px !important;
    background-color: white !important;
    border: 3px solid var(--primary-color) !important;
    box-shadow: 0 0 10px rgba(255, 107, 139, 0.4) !important;
    transition: transform 0.2s ease !important;
}

.affection-gauge .gradio-slider .slider-handle:hover {
    transform: scale(1.1) !important;
}

/* 関係性ステージ表示の改善 */
.relationship-stage {
    font-weight: bold !important;
    text-align: center !important;
    margin-top: 10px !important;
    padding: 8px 12px !important;
    border-radius: var(--border-radius-md) !important;
    transition: var(--transition-normal) !important;
    font-size: 1.1em !important;
    box-shadow: var(--shadow-soft) !important;
    position: relative !important;
    overflow: hidden !important;
}

.relationship-stage::after {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    background: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.1) 75%, transparent 75%) !important;
    background-size: 10px 10px !important;
    z-index: 1 !important;
    opacity: 0.5 !important;
}

.stage-hostile {
    background-color: #ffe5e8 !important;
    color: #d10023 !important;
    border-left: 5px solid #ff4d6d !important;
}

.stage-distant {
    background-color: #fff0e5 !important;
    color: #b54200 !important;
    border-left: 5px solid #ff7e54 !important;
}

.stage-cautious {
    background-color: #fff8e0 !important;
    color: #a66800 !important;
    border-left: 5px solid #ffbe3d !important;
}

.stage-friendly {
    background-color: #fffde0 !important;
    color: #707000 !important;
    border-left: 5px solid #fff95b !important;
}

.stage-warm {
    background-color: #eaffd8 !important;
    color: #2a7000 !important;
    border-left: 5px solid #a5ed6e !important;
}

.stage-close {
    background-color: #e0f4ff !important;
    color: #0057a6 !important;
    border-left: 5px solid #64d2ff !important;
}

/* 段階変化通知のアニメーション改善 */
@keyframes stageChangeNotification {
    0% {
        transform: translateY(-20px);
        opacity: 0;
    }
    10% {
        transform: translateY(0);
        opacity: 1;
    }
    90% {
        transform: translateY(0);
        opacity: 1;
    }
    100% {
        transform: translateY(-10px);
        opacity: 0;
    }
}

.stage-change-notification {
    animation: stageChangeNotification 5s ease-in-out forwards !important;
    padding: 15px !important;
    margin: 15px 0 !important;
    border-radius: var(--border-radius-md) !important;
    text-align: center !important;
    font-weight: bold !important;
    box-shadow: var(--shadow-medium) !important;
    position: relative !important;
    overflow: hidden !important;
    background-color: white !important;
    border-left: 5px solid !important;
}

.stage-change-notification::before {
    content: '✨' !important;
    margin-right: 8px !important;
}

.stage-change-notification::after {
    content: '✨' !important;
    margin-left: 8px !important;
}

.stage-change-notification.stage-distant {
    border-color: #ff7e54 !important;
    background-color: #fff0e5 !important;
}

.stage-change-notification.stage-cautious {
    border-color: #ffbe3d !important;
    background-color: #fff8e0 !important;
}

.stage-change-notification.stage-friendly {
    border-color: #fff95b !important;
    background-color: #fffde0 !important;
}

.stage-change-notification.stage-warm {
    border-color: #a5ed6e !important;
    background-color: #eaffd8 !important;
}

.stage-change-notification.stage-close {
    border-color: #64d2ff !important;
    background-color: #e0f4ff !important;
}

/* 詳細情報表示のスタイル改善 */
.relationship-details {
    margin-top: 15px !important;
    padding: 15px !important;
    border-radius: var(--border-radius-md) !important;
    background-color: white !important;
    border-left: 5px solid var(--accent-color) !important;
    box-shadow: var(--shadow-soft) !important;
}

.relationship-details h4 {
    margin-top: 0 !important;
    margin-bottom: 10px !important;
    color: var(--accent-dark) !important;
    font-size: 1.1em !important;
    border-bottom: 2px dotted var(--accent-light) !important;
    padding-bottom: 5px !important;
}

.relationship-details p {
    margin: 10px 0 !important;
    line-height: 1.5 !important;
    color: var(--text-secondary) !important;
}

.relationship-details ul {
    margin: 10px 0 !important;
    padding-left: 25px !important;
    list-style-type: none !important;
}

.relationship-details ul li {
    position: relative !important;
    padding: 3px 0 !important;
}

.relationship-details ul li::before {
    content: '•' !important;
    color: var(--accent-color) !important;
    font-weight: bold !important;
    position: absolute !important;
    left: -15px !important;
}

.relationship-details ul li strong {
    color: var(--accent-dark) !important;
}

.next-stage-progress {
    margin-top: 15px !important;
    font-size: 0.95em !important;
    color: var(--text-secondary) !important;
    background-color: var(--neutral-light) !important;
    padding: 10px !important;
    border-radius: var(--border-radius-sm) !important;
}

.next-stage-progress .progress-bar {
    height: 8px !important;
    background-color: var(--neutral-medium) !important;
    border-radius: 4px !important;
    margin-top: 5px !important;
    overflow: hidden !important;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1) !important;
}

.next-stage-progress .progress-fill {
    height: 100% !important;
    background: linear-gradient(to right, var(--accent-color), var(--primary-color)) !important;
    transition: width 1s ease !important;
    border-radius: 4px !important;
}

/* レスポンシブデザイン調整 */
@media (max-width: 768px) {
    body .gradio-container {
        padding: 15px !important;
    }
    
    .affection-gauge::before {
        display: none !important;
    }
    
    .relationship-stage {
        font-size: 1em !important;
    }
}

/* アニメーション効果 */
@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}

.pulse-animation {
    animation: pulse 2s infinite !important;
}

/* 装飾要素 */
.kawaii-decoration {
    position: absolute !important;
    font-size: 20px !important;
    opacity: 0.5 !important;
    pointer-events: none !important;
}

/* 全体のページスタイル */
.gradio-app {
    background-color: #f9f0f5 !important;
    background-image: 
        radial-gradient(circle at 25px 25px, rgba(255, 107, 139, 0.15) 2%, transparent 0%), 
        radial-gradient(circle at 75px 75px, rgba(107, 127, 255, 0.15) 2%, transparent 0%) !important;
    background-size: 100px 100px !important;
}

/* チャットボックスの装飾 */
.gradio-chatbot::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 5px !important;
    background: linear-gradient(to right, var(--primary-color), var(--accent-color)) !important;
    z-index: 10 !important;
}

/* Gradioの特定のクラスに対する強制上書き */
.dark .gradio-container {
    background-color: var(--neutral-light) !important;
}

.gradio-container .prose {
    max-width: 100% !important;
}

/* チャットボックスのメッセージスタイル強制上書き */
.gradio-chatbot .user, .gradio-chatbot .bot {
    padding: 0 !important;
    border: none !important;
    background: transparent !important;
}

.gradio-chatbot .user > div, .gradio-chatbot .bot > div {
    padding: 12px 16px !important;
    margin: 8px !important;
    border-radius: var(--border-radius-sm) !important;
}

.gradio-chatbot .user > div {
    background-color: var(--accent-light) !important;
}

.gradio-chatbot .bot > div {
    background-color: var(--primary-light) !important;
}

/* ボタンスタイルの強制上書き */
button.primary {
    background-color: var(--primary-color) !important;
    color: white !important;
}

button.secondary {
    background-color: var(--neutral-medium) !important;
    color: var(--text-primary) !important;
}

/* スライダーの強制上書き */
input[type="range"] {
    -webkit-appearance: none !important;
    appearance: none !important;
    height: 24px !important;
    border-radius: var(--border-radius-lg) !important;
    background: linear-gradient(to right,
        #ff4d6d 0%,
        #ff7e54 10%,
        #ffbe3d 25%,
        #fff95b 45%,
        #a5ed6e 65%,
        #64d2ff 85%,
        #bb8eff 100%
    ) !important;
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none !important;
    appearance: none !important;
    width: 30px !important;
    height: 30px !important;
    background-color: white !important;
    border: 3px solid var(--primary-color) !important;
    border-radius: 50% !important;
    box-shadow: 0 0 10px rgba(255, 107, 139, 0.4) !important;
}

input[type="range"]::-moz-range-thumb {
    width: 30px !important;
    height: 30px !important;
    background-color: white !important;
    border: 3px solid var(--primary-color) !important;
    border-radius: 50% !important;
    box-shadow: 0 0 10px rgba(255, 107, 139, 0.4) !important;
}